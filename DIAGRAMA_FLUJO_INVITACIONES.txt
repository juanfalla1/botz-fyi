================================================================================
DIAGRAMA DETALLADO: FLUJO DE CREACIÃ“N Y ACEPTACIÃ“N DE INVITACIONES
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FASE 1: CREAR INVITACIÃ“N (Platform Admin)                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Platform Admin                              Backend API                  Database
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                       â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”€â”€â”€â”€â”€â”€â”€â”€
        â”‚                                           â”‚                       â”‚
        â”‚ 1. Abre /admin/invites                     â”‚                       â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                       â”‚
        â”‚                                           â”‚                       â”‚
        â”‚ 2. Llena formulario:                      â”‚                       â”‚
        â”‚    - Email                                â”‚                       â”‚
        â”‚    - Rol (developer/guest/support)        â”‚                       â”‚
        â”‚    - Access Level (full/readonly/limited) â”‚                       â”‚
        â”‚    - Notas (opcional)                     â”‚                       â”‚
        â”‚                                           â”‚                       â”‚
        â”‚ 3. Click "Nueva InvitaciÃ³n"               â”‚                       â”‚
        â”œâ”€â”€POST /api/platform/admin-invitesâ”€â”€â”€â”€â”€â”€â”€â”€>â”‚                       â”‚
        â”‚    Headers: Authorization: Bearer {token} â”‚                       â”‚
        â”‚    Body: { email, role, access_level }   â”‚                       â”‚
        â”‚                                           â”‚                       â”‚
        â”‚                          4. Validaciones:  â”‚                       â”‚
        â”‚                             â”œâ”€ Â¿Platform Admin? (verificar en tabla) â”‚
        â”‚                             â”‚              â”‚<â”€queryâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>
        â”‚                             â”‚              â”‚                       â”‚
        â”‚                             â”œâ”€ Email Ãºnico â”‚                       â”‚
        â”‚                             â””â”€ Rol vÃ¡lido  â”‚                       â”‚
        â”‚                                           â”‚                       â”‚
        â”‚                          5. Crear invite  â”‚                       â”‚
        â”‚                             en BD          â”‚<â”€INSERT admin_invitesâ”€>
        â”‚                                           â”‚                       â”‚
        â”‚                          6. Generar       â”‚ (inviteId, email,     â”‚
        â”‚                             link con ID   â”‚  role, status:pending,â”‚
        â”‚                                           â”‚  expires_at: now+7d)  â”‚
        â”‚                                           â”‚                       â”‚
        â”‚                          7. Enviar email  â”‚                       â”‚
        â”‚                             (sendMail)    â”‚                       â”‚
        â”‚                                           â”‚                       â”‚
        â”‚ 8. Respuesta con Ã©xito                    â”‚                       â”‚
        â”‚<â”€â”€{ ok: true, inviteId, emailSent }â”€â”€â”€â”€â”€â”€â”€â”‚                       â”‚
        â”‚                                           â”‚                       â”‚
        â”‚ 9. Muestra Ã©xito en UI                    â”‚                       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

        EMAIL ENVIADO:
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Asunto: InvitaciÃ³n a Botz Platform - [developer/...]    â”‚
        â”‚                                                         â”‚
        â”‚ Cuerpo HTML (mailer.ts):                               â”‚
        â”‚ - Email: {email}                                        â”‚
        â”‚ - Rol: {role}                                           â”‚
        â”‚ - Nivel de Acceso: {access_level}                      â”‚
        â”‚                                                         â”‚
        â”‚ ðŸ”— LINK: https://botz.fyi/accept-invite/{inviteId}    â”‚
        â”‚                                                         â”‚
        â”‚ â° VÃ¡lido por: 7 dÃ­as                                   â”‚
        â”‚ ðŸ”’ Link Ãºnico y personalizado                          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FASE 2: VALIDAR INVITACIÃ“N (Usuario recetor)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Usuario                    Frontend                  Backend API           Database
â”€â”€â”€â”€â”€â”€â”€â”€                   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”€â”€â”€â”€â”€â”€â”€â”€
  â”‚                              â”‚                        â”‚                  â”‚
  â”‚ 1. Click en link             â”‚                        â”‚                  â”‚
  â”‚ /accept-invite/{inviteId}    â”‚                        â”‚                  â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                        â”‚                  â”‚
  â”‚                              â”‚                        â”‚                  â”‚
  â”‚                         2. PageComponent monta:       â”‚                  â”‚
  â”‚                            - useEffect con params    â”‚                  â”‚
  â”‚                            - Llama verifyInvite()    â”‚                  â”‚
  â”‚                              â”‚                        â”‚                  â”‚
  â”‚                              â”‚ 3. GET /api/...        â”‚                  â”‚
  â”‚                              â”‚    /validate           â”‚                  â”‚
  â”‚                              â”œâ”€â”€â”€?inviteId={id}â”€â”€â”€â”€â”€â”€>â”‚                  â”‚
  â”‚                              â”‚                        â”‚                  â”‚
  â”‚                              â”‚                   4. Buscar               â”‚
  â”‚                              â”‚                      en DB                â”‚
  â”‚                              â”‚                        â”‚<â”€â”€queryâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>
  â”‚                              â”‚                        â”‚  admin_invites    â”‚
  â”‚                              â”‚                        â”‚  WHERE id = ...   â”‚
  â”‚                              â”‚                        â”‚                  â”‚
  â”‚                              â”‚                   5. Validaciones:        â”‚
  â”‚                              â”‚                      â”œâ”€ Existe?          â”‚
  â”‚                              â”‚                      â”œâ”€ status=pending?  â”‚
  â”‚                              â”‚                      â””â”€ expired?         â”‚
  â”‚                              â”‚                        â”‚                  â”‚
  â”‚                              â”‚ 6. Retorna invite      â”‚                  â”‚
  â”‚                              â”‚<â”€â”€â”€â”€{ ok, invite }â”€â”€â”€â”€â”€â”‚                  â”‚
  â”‚                              â”‚                        â”‚                  â”‚
  â”‚                         7. Muestra form               â”‚                  â”‚
  â”‚                            de contraseÃ±a             â”‚                  â”‚
  â”‚                            + info de invite          â”‚                  â”‚
  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                        â”‚                  â”‚
  â”‚                              â”‚                        â”‚                  â”‚
  â”‚ Info mostrada:               â”‚                        â”‚                  â”‚
  â”‚ - Email: {email}             â”‚                        â”‚                  â”‚
  â”‚ - Rol: {role}                â”‚                        â”‚                  â”‚
  â”‚ - Acceso: {access_level}     â”‚                        â”‚                  â”‚
  â”‚ - Formulario: password input â”‚                        â”‚                  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FASE 3: ACEPTAR INVITACIÃ“N (Usuario crea cuenta)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Usuario                   Fro
